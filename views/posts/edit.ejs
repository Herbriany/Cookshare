<% layout('layouts/boilerplate') -%>

<div class="container">
    <div class="spacer">
        <div class="row m-0">
            <div class="col-lg-12">
                <div class="contact-box p-r-40">
                    <h4 class="title">Edit Posts</h4>
                    <form data-aos="fade-left" data-aos-duration="1200" action="/posts/<%= post.id %>?_method=PUT" name="" method="POST" id="postEditForm" enctype="multipart/form-data">
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group m-t-15">
                                    <label for="title">Food name:</label>
                                    <input type="text" name="post[title]" placeholder="Title" value="<%= post.title %>" id="title" class="form-control">
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="form-group m-t-15">
                                    <label for="price">Price (<%= currentUser.currency %>):<small><a href="/profile">Change currency</a></small></label>
                                    <input type="number" name="post[price]" placeholder="Price" step="<%= step %>" id="price" value="<%= post.price %>" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6">
                                <div class="form-group m-t-15">
                                    <label for="location">Location:</label>
                                    <input type="text" name="post[location]" placeholder="Location" value="<%= post.location %>" class="form-control">
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <label for="description">Food description:</small></label>
                                <textarea name="post[description]" placeholder="Description" class="form-control"><%= post.description %></textarea>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-8">
                                <label for="imageUpload">Food images<small> (max 4):</small></label>
                                <input type="file" id="imageUpload" accept="images/*" name="images" multiple />
                            </div>
                        </div>
                        <% if (post.images.length) { %>
                            <h5 class="title">Select all images you wish to delete:</h5>
                            <div class="row">
                            <% post.images.forEach(function(image, i) { %>
                                <div class="col-lg-3">
                                    <div class="card" data-aos="flip-left" data-aos-duration="1200">
                                        <img src="<%= image.url %>" alt="chef<%= i %>" width="200px" class="card-img-top">
                                        <input type="checkbox" name="deleteImages[]" class="imageDeleteCheckbox" id="image<%= i %>" value="<%= image.public_id %>">
                                    </div>
                                </div>
                            <% }); %>
                            </div>
                        <% } %>
                        <div class="col-lg-12">
                            <button type="submit" class="btn btn-danger-gradiant m-t-20 btn-arrow"><span> SUBMIT <i class="ti-arrow-right"></i></span></button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="/javascripts/post-edit.js"></script>